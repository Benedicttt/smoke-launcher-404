w = new WebSocket (
      <% if @ip = Socket.ip_address_list.detect { |intf| intf.ipv4_private? } %>
     <% @ip = Socket.ip_address_list.detect { |intf| intf.ipv4_private? } %>
       'ws://<%= @ip.ip_address %>:8081'
     <% else %>
       'ws://<%= ip = IPSocket.getaddress(Socket.gethostname) %>:8081'
     <% end %>
   )

// w = new WebSocket (
//      <% @ip = Socket.ip_address_list.detect { |intf| intf.ipv4_private? } %>
//      'ws://<%= @ip.ip_address %>:8081'
//    )
// $(function(){
//   <% @ip = Socket.ip_address_list.detect { |intf| intf.ipv4_private? } %>
//   w = ActionCable.createConsumer("ws://<%= @ip.ip_address %>:8081");
// })
